{"remainingRequest":"D:\\Googledownload\\Topic_and_user_profile_analysis_system-master\\code\\front_end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Googledownload\\Topic_and_user_profile_analysis_system-master\\code\\front_end\\src\\components\\wbAnalyze\\Relation_graph.vue?vue&type=style&index=0&id=217538c9&scpoed=true&lang=css&","dependencies":[{"path":"D:\\Googledownload\\Topic_and_user_profile_analysis_system-master\\code\\front_end\\src\\components\\wbAnalyze\\Relation_graph.vue","mtime":1673006195000},{"path":"D:\\Googledownload\\Topic_and_user_profile_analysis_system-master\\code\\front_end\\node_modules\\css-loader\\dist\\cjs.js","mtime":1673935854963},{"path":"D:\\Googledownload\\Topic_and_user_profile_analysis_system-master\\code\\front_end\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1673935858031},{"path":"D:\\Googledownload\\Topic_and_user_profile_analysis_system-master\\code\\front_end\\node_modules\\postcss-loader\\src\\index.js","mtime":1673935856162},{"path":"D:\\Googledownload\\Topic_and_user_profile_analysis_system-master\\code\\front_end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1673935854020},{"path":"D:\\Googledownload\\Topic_and_user_profile_analysis_system-master\\code\\front_end\\node_modules\\vue-loader\\lib\\index.js","mtime":1673935857333}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5yZWxhdGlvbl9ncmFwaF90b3AgewogIG1hcmdpbi1sZWZ0OiAxMHB4Owp9Ci5yZWxhdGlvbl9ncmFwaCB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdG9wOiAzMSU7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiA2OCU7Cn0KI3Nob3dfZ3JhcGggewogIGhlaWdodDogNTAwcHg7CiAgd2lkdGg6IDQwMHB4Owp9Cg=="},{"version":3,"sources":["Relation_graph.vue"],"names":[],"mappings":";AA0IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Relation_graph.vue","sourceRoot":"src/components/wbAnalyze","sourcesContent":["<template>\n  <div class=\"relation_graph\">\n    <div class=\"relation_graph_top\" @click=\"ToPersonList\">\n      <svg class=\"icon\" aria-hidden=\"true\">\n        <use xlink:href=\"#icon-wangluoguanxitu\"></use>\n      </svg>\n      <span>关系图</span>\n    </div>\n    <div id=\"show_graph\"></div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"relation_graph\",\n  data() {\n    return {\n      categories: [\n        {\n          name: \"正常用户\",\n        },\n        // {\n        //   name: \"水军\",\n        // },\n      ],\n    };\n  },\n  methods: {\n    myRelationGraph(id) {\n      let option;\n      let myChart = this.$echarts.init(document.getElementById(\"show_graph\"));\n      myChart.showLoading();\n      this.$axios.get(\"relation_graph?tag_task_id=\"+id).then((res) => {\n        console.log(res.data.data)\n        let nodes = res.data.data.nodes_list;\n        for (let index in nodes) {\n          nodes[index].id = index;\n        }\n        let links = res.data.data.links_list;\n        links.forEach((link) => {\n          for (let node of nodes) {\n            if (link.source == node.name) {\n              link.source = node.id;\n              node.show = true;\n            }\n            if (link.target == node.name) {\n              link.target = node.id;\n              node.show = true;\n            }\n          }\n        });\n        let newNodes = [];\n        for(let n in nodes){\n          if(nodes[n].show){\n            newNodes.push(nodes[n])\n          }\n        }\n        console.log(newNodes);\n        console.log(links);\n        myChart.hideLoading();\n        nodes.forEach(function (node) {\n          node.label = {\n            show: node.value > 10,\n          };\n        });\n        option = {\n          title: {\n            text: \"用户关系图\",\n            subtext: \"Default layout\",\n            top: \"bottom\",\n            left: \"right\",\n          },\n          tooltip: {},\n          legend: [\n            {\n              data: this.categories.map(function (a) {\n                return a.name;\n              }),\n            },\n          ],\n          animationDuration: 1500,\n          animationEasingUpdate: \"quinticInOut\",\n          series: [\n            {\n              name: \"用户关系图\",\n              type: \"graph\",\n              layout: \"force\",\n              data: newNodes,\n              links: links,\n              categories: this.categories,\n              roam: true,\n              label: {\n                position: \"right\",\n                formatter: \"{b}\",\n              },\n              lineStyle: {\n                color: \"source\",\n                curveness: 0.3,\n              },\n              emphasis: {\n                focus: \"adjacency\",\n                lineStyle: {\n                  width: 10,\n                },\n              },\n            },\n          ],\n        };\n        myChart.setOption(option);\n      });\n      option && myChart.setOption(option);\n    },\n    ToPersonList() {\n      this.$router.push({\n        path: \"/person_list\",\n        query: {\n          tag_task_id: this.tid,\n        },\n      });\n    },\n  },\n  mounted() {\n    let res = Array.from(new Array(5), () => []);\n    console.log(res);\n    this.$bus.$on(\"send_tag_task_id\", (tag_task_id) => {\n      console.log(\"这里是关系图组件,收到了数据:\", tag_task_id);\n      this.tid = tag_task_id;\n      this.myRelationGraph(tag_task_id);\n\n    });\n  },\n  beforeDestroy() {\n    this.$bus.$off(\"send_tag_task_id\");\n  },\n};\n</script>\n\n<style scpoed>\n.relation_graph_top {\n  margin-left: 10px;\n}\n.relation_graph {\n  background-color: #fff;\n  position: absolute;\n  top: 31%;\n  width: 100%;\n  height: 68%;\n}\n#show_graph {\n  height: 500px;\n  width: 400px;\n}\n</style>"]}]}